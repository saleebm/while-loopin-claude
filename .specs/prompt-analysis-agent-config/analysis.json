{
  "feature_name": "prompt-analysis-agent-config",
  "prompt_type": "Autonomous agent configuration analysis and generation system - analyzing a user prompt to generate structured JSON configuration for agent execution",
  "complexity": 3,
  "max_iterations": 5,
  "enable_code_review": false,
  "max_reviews": 0,
  "relevant_files": [
    "lib/smart-agent.sh",
    "lib/agent-runner.sh",
    "lib/claude-functions.sh",
    "CLAUDE.md",
    "ARCHITECTURE.md",
    "examples/interactive-agent-config.sh",
    ".specs/agent-configuration-analyzer/AGENT-PROMPT.md"
  ],
  "enhanced_prompt": "# Autonomous Agent Configuration Analysis System\n\n## Task Overview\nAnalyze a user-provided prompt (already read from file) and generate a comprehensive JSON configuration for running an autonomous Claude agent in the While Loopin' Claude system.\n\n## Context: While Loopin' Claude Framework\n\nThis project is an AI-orchestrated autonomous agent system where:\n- Claude runs in iterative loops until tasks complete\n- Configuration is determined by AI analysis (not hard-coded)\n- Feature specifications are stored in `.specs/{feature-name}/` directories\n- Handoff documents track state between iterations\n- Optional code review cycles ensure quality\n- Rate limiting prevents API overload (15-second delays between iterations)\n\n## Analysis Requirements\n\n### 1. Task Type Classification\nDescribe the specific task type beyond generic categories. Examples:\n- \"Frontmatter corruption fix in MDX editor save workflow\"\n- \"API endpoint discovery and documentation generation\"\n- \"Component refactoring with accessibility compliance validation\"\n\n### 2. Feature Folder Naming\nGenerate a kebab-case slug that:\n- Descriptively names the feature\n- Is short but clear (2-4 words typically)\n- Reflects the core purpose\n\n### 3. Relevant Files Identification\nIdentify files likely needed based on:\n- File types mentioned in the prompt\n- Common patterns in the codebase\n- Configuration or setup files\n- Related modules and utilities\n\n### 4. Complexity Assessment\n- Scale: 1-10, where 1 is trivial, 10 is extremely complex\n- Estimate based on:\n  - Number of different file types to modify\n  - Architectural changes required\n  - Integration complexity\n  - Unknown factors needing investigation\n- max_iterations should be roughly 2x the complexity\n\n### 5. Code Review Decision\n- Enable (true) for: production code, refactoring, bug fixes, features touching critical paths\n- Disable (false) for: documentation, simple scripts, exploration, one-off utilities\n- max_reviews typically 3-5 if enabled\n\n### 6. Enhanced Prompt Creation\nTake the original prompt and add:\n- Project context and architecture overview\n- Relevant file references with full paths\n- Expected output format\n- Quality criteria and success metrics\n- Integration points with existing systems\n- Any constraints or considerations\n\n### 7. Initial Handoff Document\nCreate a HANDOFF.md with:\n- Session End status: \"starting\" (not complete)\n- Current State: What's being worked on\n- Next Steps: Initial action items\n- Findings: Known information about the task\n- Investigation Notes: Technical details to track\n\n## JSON Output Structure\n\nMust include:\n- feature_name: kebab-case slug\n- prompt_type: specific task description\n- complexity: 1-10 integer\n- max_iterations: 2x complexity\n- enable_code_review: boolean\n- max_reviews: 0 if review disabled, 3-5 if enabled\n- relevant_files: array of file paths\n- enhanced_prompt: detailed prompt with full context\n- initial_handoff: handoff document as markdown string\n- reasoning: explanation of all configuration decisions\n\n## Key Considerations\n\n- Use the CLAUDE.md file to understand project best practices\n- Analyze git status to understand ongoing work\n- Consider recent commits to understand project momentum\n- Extract relevant files from existing .specs/ examples\n- Make configuration decisions based on actual task complexity, not assumptions\n\n## Output\n\nReturn ONLY valid JSON with no additional text or markdown wrapper.",
  "initial_handoff": "# Agent Handoff\n\n## Session End\nStatus: starting\n\n## Current State\n- Task: Analyze a user prompt and generate structured JSON configuration for autonomous agent execution\n- Input: User prompt read from `.ai-dr/prompts/2025-11-07/prompt_20251107_204540.md`\n- Context: Working within the While Loopin' Claude framework\n- Git Status: On main branch with modified files (lib/STRUCTURED-JSON-EXTRACTION.md, lib/smart-agent.sh) and untracked spec directories\n\n## Next Steps\n1. Parse and understand the user's original prompt from the input file\n2. Classify the task type with specificity and creativity\n3. Determine optimal feature folder naming convention\n4. Identify all relevant files in the codebase\n5. Assess complexity on 1-10 scale and calculate max_iterations\n6. Decide whether code review should be enabled\n7. Create enhanced version of prompt with full project context\n8. Write initial handoff document following framework patterns\n9. Generate complete JSON configuration\n10. Validate JSON structure and return\n\n## Findings\n- While Loopin' Claude is a mature framework with established patterns\n- Project uses intelligent prompt analysis and AI-determined configuration\n- Similar analysis work exists in `.specs/agent-configuration-analyzer/`\n- Framework emphasizes composability and reusable functions\n- Feature specs follow consistent structure with context management\n\n## Investigation Notes\n- The user prompt is meta (analyzing a prompt to generate agent config)\n- This is a light-weight analysis task, not requiring code changes\n- Configuration should reflect the analysis task itself, not the user's eventual use case\n- Task is low-complexity, suitable for quick execution\n- No code review needed as this is configuration generation, not code implementation\n- Output is pure JSON, making validation straightforward",
  "reasoning": "This is a meta-analysis task where the agent will receive an existing user prompt and generate configuration for it. The task itself is low-complexity (complexity: 3) because it involves text analysis and JSON structure generation rather than code implementation. Max iterations set to 5 (roughly 2x complexity) to allow for refinement of the analysis if needed. Code review is disabled since this generates configuration metadata, not production code. Relevant files focus on the framework's configuration analysis patterns and smart-agent implementation to understand how configuration generation should work. The enhanced prompt adds full context about the While Loopin' Claude framework, the configuration structure, and analysis requirements that weren't in the original prompt. This meta-task demonstrates the framework's self-describing nature - the agent itself running to analyze prompts for other agents."
}
